(()=>{"use strict";var e=document.querySelectorAll(".popup"),t=document.querySelector(".popup_type_profile-info"),n=document.querySelector(".popup_type_new-card"),r=document.querySelector(".popup_type_image-open"),o=document.querySelector(".popup__image"),c=document.querySelector(".popup__description"),u=document.querySelector(".btn_el_edit"),a=document.querySelector(".btn_el_add"),l=(document.querySelectorAll(".btn_el_close"),document.querySelector(".profile__name")),i=document.querySelector(".profile__description"),p=document.querySelector(".popup__edit-form"),s=p.querySelector(".popup__input_type_name"),d=p.querySelector(".popup__input_type_description"),m=document.querySelector(".popup__add-form"),_=m.querySelector(".popup__input_type_name"),y=m.querySelector(".popup__input_type_description"),f=document.querySelector("#card").content.querySelector(".card"),v=document.querySelector(".gallery");function S(e){"Escape"===e.key&&k(document.querySelector(".popup_opened"))}function q(e){e.classList.add("popup_opened"),document.addEventListener("keydown",S)}function k(e){e.classList.remove("popup_opened"),document.addEventListener("keydown",S)}function E(e){v.prepend(e)}function g(e){var t,n,u,a=f.cloneNode(!0),l=a.querySelector(".card__image");return l.alt=e.name,l.src=e.link,a.querySelector(".card__title").textContent=e.name,t=a,n=e.name,u=e.link,t.querySelector(".btn_el_like").addEventListener("click",(function(e){e.target.classList.toggle("js-active")})),t.querySelector(".btn_el_delete").addEventListener("click",(function(e){e.target.closest(".card").remove()})),t.querySelector(".card__image").addEventListener("click",(function(){var e,t;e=n,t=u,o.src=t,o.alt=e,c.textContent=e,q(r)})),a}var b={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".btn_el_save",inputErrorClass:"popup__input_invalid",errorClass:".popup__error_type_"};function L(e,t,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.customMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,n){var r=e.querySelector("".concat(n.errorClass).concat(t.name));t.classList.remove(n.inputErrorClass),r.textContent=""}(e,t,n):function(e,t,n){var r=e.querySelector("".concat(n.errorClass).concat(t.name));t.classList.add(n.inputErrorClass),r.textContent=t.validationMessage}(e,t,n)}function h(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.disabled=!1:t.disabled=!0}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){E(g(e))})),u.addEventListener("click",(function(){q(t),s.value=l.textContent,d.value=i.textContent;var e=Array.from(t.querySelectorAll(b.inputSelector)),n=t.querySelector(b.submitButtonSelector);e.forEach((function(r){L(t,r,b),h(e,n)}))})),p.addEventListener("submit",(function(e){e.preventDefault(),l.textContent=s.value,i.textContent=d.value,k(t)})),a.addEventListener("click",(function(){q(n);var e=Array.from(n.querySelectorAll(b.inputSelector)),t=n.querySelector(b.submitButtonSelector);e.forEach((function(n){h(e,t)}))})),m.addEventListener("submit",(function(e){e.preventDefault(),E(g({name:_.value,link:y.value})),_.value="",y.value="",k(n)})),e.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&k(e),t.target.classList.contains("btn_el_close")&&k(e)}))})),function(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);n.forEach((function(o){o.addEventListener("input",(function(){L(e,o,t),h(n,r)}))}))}(t,e)}))}(b)})();